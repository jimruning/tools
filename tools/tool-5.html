<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 视频剪辑 - AI 工具集</title>
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; background-color: var(--bg-secondary);
            font-family: var(--font-family); padding: 40px 20px;
        }
        .tool-container {
            width: 100%; max-width: 800px; padding: 40px;
            background-color: var(--bg-primary); border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        h1, p.subtitle { text-align: center; }
        h1 { color: var(--text-primary); margin-bottom: 16px; }
        p.subtitle { color: var(--text-secondary); margin-bottom: 32px; }
        
        .upload-area {
            border: 2px dashed var(--border-color); border-radius: var(--border-radius);
            padding: 40px; margin-bottom: 24px; cursor: pointer; text-align: center;
        }
        .upload-area i { font-size: 48px; color: var(--primary-color); margin-bottom: 16px; }
        #video-file-input { display: none; }

        .video-preview, .result-area {
            display: none; width: 100%; background-color: #000;
            border-radius: 8px; margin-bottom: 24px;
        }
        .video-preview video, .result-area video { width: 100%; border-radius: 8px; }
        
        .options { display: flex; gap: 20px; margin-bottom: 24px; }
        .form-group { flex: 1; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 8px; }
        .form-group select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); }

        .progress-area { display: none; margin-bottom: 24px; }
        .progress-bar { width: 100%; height: 10px; background-color: var(--bg-secondary); border-radius: 5px; overflow: hidden; }
        .progress-bar-inner { width: 0%; height: 100%; background-color: var(--primary-color); transition: width 0.5s ease; }
        .progress-text { text-align: center; margin-top: 8px; color: var(--text-secondary); }

        .action-btn {
            width: 100%; background-color: var(--primary-color); color: white; border: none;
            padding: 14px 28px; border-radius: 8px; font-size: 16px; font-weight: 500;
            cursor: pointer; transition: background-color 0.3s ease;
        }
        .action-btn:disabled { background-color: var(--text-muted); cursor: not-allowed; }

        .back-link { display: block; margin-top: 32px; color: var(--primary-color); text-decoration: none; text-align: center; }
    </style>
</head>
<body>
    <div class="tool-container">
        <h1>AI 视频剪辑</h1>
        <p class="subtitle">上传您的视频，AI 将自动为您挑选精彩瞬间，生成短片。</p>

        <div class="upload-area" id="upload-area">
            <i class="fas fa-video"></i>
            <p id="upload-text">点击上传视频文件</p>
        </div>
        <input type="file" id="video-file-input" accept="video/*">

        <div class="video-preview" id="video-preview">
            <video id="preview-player" controls></video>
        </div>

        <div class="options">
            <div class="form-group">
                <label for="duration">剪辑时长</label>
                <select id="duration">
                    <option value="15">15秒</option>
                    <option value="30">30秒</option>
                    <option value="60">60秒</option>
                </select>
            </div>
            <div class="form-group">
                <label for="style">视频风格</label>
                <select id="style">
                    <option value="快节奏">快节奏</option>
                    <option value="电影感">电影感</option>
                    <option value="Vlog">Vlog</option>
                </select>
            </div>
        </div>

        <button class="action-btn" id="generate-btn" disabled>生成剪辑</button>

        <div class="progress-area" id="progress-area">
            <div class="progress-bar"><div class="progress-bar-inner" id="progress-bar-inner"></div></div>
            <p class="progress-text" id="progress-text">正在处理...</p>
        </div>

        <div class="result-area" id="result-area">
             <video id="result-player" controls></video>
        </div>

        <a href="../index.html" class="back-link">返回主页</a>
    </div>

    <script>
        const uploadArea = document.getElementById('upload-area');
        const uploadText = document.getElementById('upload-text');
        const videoFileInput = document.getElementById('video-file-input');
        const videoPreview = document.getElementById('video-preview');
        const previewPlayer = document.getElementById('preview-player');
        const generateBtn = document.getElementById('generate-btn');
        const progressArea = document.getElementById('progress-area');
        const progressBarInner = document.getElementById('progress-bar-inner');
        const progressText = document.getElementById('progress-text');
        const resultArea = document.getElementById('result-area');
        const resultPlayer = document.getElementById('result-player');

        let videoFile;

        uploadArea.addEventListener('click', () => videoFileInput.click());
        videoFileInput.addEventListener('change', (event) => {
            videoFile = event.target.files[0];
            if (videoFile) {
                uploadText.textContent = `已选择: ${videoFile.name}`;
                const fileURL = URL.createObjectURL(videoFile);
                previewPlayer.src = fileURL;
                videoPreview.style.display = 'block';
                generateBtn.disabled = false;
                resultArea.style.display = 'none';
            }
        });

        generateBtn.addEventListener('click', () => {
            generateBtn.disabled = true;
            progressArea.style.display = 'block';
            progressBarInner.style.width = '0%';
            progressText.textContent = '正在分析视频... (0%)';
            resultArea.style.display = 'none';

            // --- Simulate AI Processing ---
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressBarInner.style.width = `${progress}%`;
                progressText.textContent = `AI 正在剪辑... (${progress}%)`;
                if (progress >= 100) {
                    clearInterval(interval);
                    progressText.textContent = '生成完毕！';
                    
                    // In a real app, the src would be the new processed video
                    resultPlayer.src = previewPlayer.src;
                    resultArea.style.display = 'block';
                    generateBtn.disabled = false;
                }
            }, 400);
        });
    </script>
</body>
</html>
